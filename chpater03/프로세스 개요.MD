---
### 프로세스 개념
---
프로세스(Process)라는 용어는 1960년대 멀틱스 시스템(Multics System)을 설계한 사람들이 처음 사용했다. 이후 작업(Task)이라는 용어와 함께 사용되었으며 다음과 같이 다양하게 정의되어 왔다.

- 실행 중인 프로그램

- 비동기적(Asynchronous)행위

- 실행 중인 프로시저

- 실행 중인 프로시저의 제어 추적

- 운영체제에 존재하는 PCB(Process Control Block,프로세스 제어 블록)

- 프로세서에 할당되어 실행될 수 있는 개체

- 디스패치(Dispatch)가 가능한 대상

프로세스에 대한 다양한 정의 중 가장 일반적인 것은 '실행 중인 프로그램'이다. 여기서 실행중인 프로그램이란 디스크에 저장되어 있던 실행 가능한 프로그램이 메모리에 적재되어 운영체제의 제어를 받는 상태를 말한다. 다시 말해, 해당 프로세스가 사용하고 있는 메모리 영역(자신의 주소 공간)이 존재함을 의미한다.

프로세스가 실행 중인 프로그램의 역할을 수행하려면 프로세서 할당(점유)시간과 메모리, 파일, 입출력장치 같은 자원이 필요한데, 자원은 프로세스가 생성되거나 실행될 때 할당된다. 또한 프로세스는 현재의 활동 상태를 나타내는 프로그램 카운터,프로세서의 현재 활동(레지스터 내용)도 포함한다. 프로그램이 텍스트(코드)부분만 갖는 수동적인 개체라면 프로세스는 주소 공간을 갖는 능동적인 개체다.

프로세스 주소 공간의 각 영역은 다음과 같은 역할을 한다.

- `실행 스택(Stack)`: 호출된 프로시저(함수)의 복귀 주소와 지역 변수처럼 일시적인 데이터를 저장하는 영역이다. 프로시저를 호출할수록 커지고 호출했던 프로시저를 반환할 때 줄어든다.

- `실행 힙(Heap)`: 텍스트(코드) 영역과는 별도로 유지되는 자유 영역이다. 프로그램 실행 중 시스템 호출을 통해 사용되다가 해지되는 등 자유자재로 사용할 수 있다.

- `데이터(정적변수)`: 프로세스 실행 중에 동적으로 할당받는 영역으로 전역 또는 정적 변수를 저장한다. 읽고 쓰기가 가능하다.

- `텍스트(코드)`: 프로세서가 실행하는 코드를 저장한다. 프로그램이 텍스트 영역을 침범하여 기록하려고 하면 오류가 발생하여 프로그램은 종료된다.

공용 프로그램인 데이터 베이스, 문서 편집기 등을 재진입 프로그램이라고 하는데, 이 프로그램들은 프로세스가 실행 중에 사용할 데이터를 보관하는 실행 스택과 공통적인 데이터를 보관하는 데이터 영역을 가진다. 그러므로 프로세스 두 개가 같은 문서 편집기 프로그램을 사용하면 이들은 별개의 프로세스로 인식된다. 텍스트(코드)영역은 같지만 별도의 스택에 서로 다른 데이터를 가지기 때문이다.

프로세스는 사용자 관점에서 세그먼트(코드,데이터,스택 등)의 가상 주소 공간을 갖는 실행 상태를 의미하고, 시스템 관점에서는 실행중인 프로그램을 의미한다.

프로세스는 처리 상태에 있는 데이터 구조로도 표현할 수 있다. 예를 들면 저장된 프로그램은 프로세서를 할당받아야 실행 상태의 프로세스가 된다. 프로세스의 실행 순서를 결정하는 스케줄러(디스패칭)에 의해 프로세서를 할당받고, 파일에 관련된 자원에 대한 참조(장치 관리,메모리 관리),프로세스 지원과 협력에 관한 정보(교착 상태,보호,동기화)교환 등을 한다. 그리고 프로세스와 관련된 연산으로는 생성,종료,보류,자원 할당,해제 등이 있다.

---
### 프로세스 종류
---
프로세스는 실행 유형에 따라 다음과 같이 크게 3가지로 구분하여 생각할 수 있다.

- 운영체제 프로세스

운영체제 프로세스는 프로세스 실행 순서를 제어하거나, 사용하고 있는 프로세스가 다른 사용자나 운영체제 영역을 침범하지 못하게 감시하는 기능을 담당한다. 또한 사용자 프로세스를 생성하거나 입출력 프로세스를 생성하는 등 시스템 운영에 필요한 작업을 수행한다. 커널 프로세스 또는 시스템 프로세스라고도 부른다.

- 사용자 프로세스

사용자 프로세스는 사용자 코드를 수행한다.

- 병행 프로세스

프로세스가 여러 개가 동시에 실행되면 병행 프로세스라고 부른다. 병행 프로세스는 서로 독립적으로 실행되는 독립 프로세스와 프로세스들이 서로 협력하며 수행되는 협동 프로세스로 구분된다.

`1.독립 프로세스`

운영체제에서 프로세스 여러 개가 병행하여 수행될 때 주어진 초깃값에 따라 항상 같은 결과를 보여주는 프로세스다. 즉, 한 프로세스가 시스템의 다른 프로세스에 영향을 주지 않거나 다른 프로세스에 의해 영향을 받지 않는다. 물론, 다른 프로세스와 데이터를 공유하지 않는다. 

`2.협동 프로세스`

독립 프로세스와 달리, 다른 프로세스에 영향을 주거나 다른 프로세스에 의해 영향을 받는 프로세스다. 주로 컴퓨터 시스템의 제한된 자원을 공유하는 프로세스들이 통제되어 상호 작용해야 하는 경우에 발생한다.

---
### 협동 프로세스
---
운영체제는 프로세스 실행을 제어하는 역할을 한다. 그런데 프로세스는 실행되면서 상태가 변하므로 운영체제는 프로세스 제어에 필요한 프로세스 상태를 점검해야 한다. 

운영체제가 프로세스를 새로 생성하면 비실행 상태로 초기화되어 실행을 기다린다. 실행 중인 프로세스가 종료되거나 인터럽트가 발생하면 비실행 프로세스 중 선택된 프로세스가 실행 상태로 변하고(디스패치) 인터럽트된 프로세스는 비실행 상태가 된다. 활동 중인 프로세스도 때로는 새로운 자원을 할당받기 위해 프로세서를 기다리는데 이때 프로세서를 할당받아야 계속 실행할 수 있다.

- 실행: 명령어가 실행되는 상태, 즉 프로세스가 프로세서를 점유한 상태

- 대기 또는 보류: 프로세서가 이벤트(입출력 종료와 같은 외부 신호)가 일어나기를 기다리는 상태

- 준비: 프로세스가 프로세서를 할당받으려고 기다리는 상태

프로세스 상태는 운영체제마다 다르게 표현하지만 의미하는 바는 같다. 여기서 중요한 것은 대부분의 프로세스는 준비나 대기(보류) 상태고 어느 한 순간에 한 프로세스만 실행 상태가 된다는 것이다.

---
### 프로세스 상태 변화
---
앞서 살펴본 바와 같이 하나의 프로세스는 시스템에서 준비,실행,대기(보류) 상태로 변화되면서 실행된다. 시스템의 모든 프로세스는 종료되어 시스템을 떠날 때까지 이 과정을 반복한다. 운영체제는 작업 스케줄러,프로세스 스케줄러 같은 프로세서 스케줄러를 이용해 프로세스 상태 변화를 관리한다.

작업 스케줄러는 스풀러가 디스크에 저장한 작업들 중 실행할 작업을 선정하여 준비 리스트에 삽입한다. 

실행 프로세스가 자발적으로 프로세서를 반환하기 전에 할당된 시간이 경과하면 준비 상태가 된다. 대기 프로세스는 보류 이유가 제거되면 준비 상태가 되고, 준비 프로세스는 대스패처가 프로세서를 할당하면 다시 실행 상태가 된다. 디스패처는 선택한 프로세스에 프로세서 제어를 넘기는 모듈이다. 

준비 - 실행

준비 리스트 맨 앞에 있던 프로세스가 프로세서를 선택(배당되어 선택)하는 것을 디스패치라 하며, 이런 상태 변화는 다음과 같이 표시한다.

다중 프로그래밍 운영체에서는 실행 프로세스가 프로세서를 일정시간만 사용할 수 있도록 시간을 제한하는데 이를 시간 할당이라 한다. 시간 할당은 특정 프로세스가 프로세서를 계속 독점하는 것을 방지한다. 

실행 - 준비

프로세스가 프로세서를 점유하고 있으면 '프로세스가 실행 상태에 있다' 고 한다. 운영체제는 특정 프로세스가 프로세서를 계속 독점하는 것을 방지하기 위해 인터럽트 클록을 두어 지정 시간 동안만 프로세서를 점유하게 한다. 

실행 - 대기

실행 프로세스가 지정 시간 전에 입출력 연산 등이 필요하거나 새로운 자원 요청 같은 문제가 발생하면, 스스로 프로세서를 양도하고 대기 상태가 된다. 이러한 상태 변화는 다음과 같이 표시한다.

대기(보류) - 준비

프로세스의 마지막 상태 변화는 입출력 작업이 끝났을 때 발생하는 깨움이다. 이는 대기(보류)에서 준비 상태로의 변화로 다음과 같이 표시한다.

프로세스 상태 변화를 정리하면 다음과 같다. 이중 프로세스 스스로 하는 것은 보류뿐이고, 나머지는 외부 조건에 의해 발생한다.

---
### 프로세서 제어 블록
---
프로세스는 운영체제 내에서 프로세스 제어 블록으로 표현된다. 프로세스 제어 블록을 작업 제어 블록이라고도 하며, 프로세스를 관리하기 위해 유지되는 데이터 블록 또는 레코드의 데이터 구조다.

프로세스 제어 블록은 프로세스 식별자, 프로세스 상태, 프로그램 카운터 등의 정보로 구성된다. 프로세스 제어 블록은 프로세스를 생성할 때 만들어지고, 메인 메모리에서 유지되며, 운영체제에서 한 프로세스의 존재를 정의한다. 프로세스의 실행이 종료되면  프로세스 제어 블록도 삭제된다. 프로세스 제어 블록의 정보는 인터럽트 처리, 자원 할당, 스케줄링 등을 수행하는 운영체제의 모든 모듈이 읽고 수정할 수 있다.

- `프로세스 식별자`: 각 프로세스에 대한 고유 식별자(숫자, 색인 항목)를 지정한다.

- `프로세스 상태`: 생성,준비,실행,대기,중단 등의 상태를 표기한다.

- `프로그램 카운터`: 프로세스 실행을 위한 다음 명령의 주소를 표시한다. 

- `레지스터 저장 영역`: 누산기, 인덱스 레지스터, 범용 레지스터, 조건 코드 등에 관한 정보로 컴퓨터 구조에 따라 수나 형태가 달라진다. 인터럽트가 발생하면 프로그램 카운터와 함께 저장되어 다시 실행될 때 원상 복귀할 수 있게 한다.

- `프로세서 스케줄링 정보`: 프로세스의 우선순위, 스케줄링 큐에 대한 포인터, 그 외 다른 스케줄 매개변수를 가진다. 

- `계정 정보`: 프로세서 사용시간, 실제 사용시간, 사용상한시간, 계정 정보, 작업이나 프로세스 번호 등이다.

- `입출력 상태 정보`: 특별한 입출력 요구 프로세스에 할당된 입출력장치, 개방된 파일의 목록 등이다.

- `메모리 관리 정보`: 메모리 관리에 필요하다. 메모리 영역을 정의하는 하한 및 상한 레지스터 또는 페이지 테이블 정보다.

---
### 프로세스 교환
---
실행 중인 프로세스가 인터럽트되면 운영체제는 다른 프로세스를 실행 상태로 바꾸고 제어를 넘겨준다. 이때 프로세서에 있는 레지스터의 내용은 나중에 프로세스가 올바르게 사용될 수 있도록 저장해야 한다. 프로세스의 교환은 인터럽트와 트랩, 시스템 호출로 나타낸다. 

이 절에서 중요한 사실은 프로그램 자체는 프로세스가 아니라는 것이다. 프로그램은 프로세스 여러 개로 생성될 수 있는 디스크에 저장된 파일 내용으로 정적 단위다. 반면, 프로세스는 프로그램 카운터, 레지스터 같은 현재 사용되는 자원에 대한 정보를 가지며 프로세스가 실행되는 과정에서 다른 여러 프로세스가 파생될 수 있는 능동적인 개체다.











































































































